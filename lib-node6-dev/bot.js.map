{"version":3,"sources":["../src/bot.js"],"names":["loggerMiddleware","event","console","log","bot","on","CHANNEL_JOINED","ctx","Promise","resolve","MESSAGE","regexp","handler","startConversation","say","waitResponse","firstName","lastName","reply"],"mappings":";;;;;;;;;;AAAA;;AAEA;;;;;;;;AAEA,MAAMA,mBAAmB,CAAC,EAAEC,KAAF,EAAD,KAAeC,QAAQC,GAAR,CAAYF,KAAZ,CAAxC;;kBAEe,aAACG,GAAD,EAAc;AAAA,UAAbA,GAAa;;AAC3BA,MAAIC,EAAJ,CACE,gBAAWC,cADb,EAEEN,gBAFF,EAGGO,GAAD,IAASL,QAAQC,GAAR,CAAYI,GAAZ,CAHX;AAAA,iCAIE,WAAOA,GAAP;AAAA,aAAeC,QAAQC,OAAR,CAAgBP,QAAQC,GAAR,CAAYI,GAAZ,CAAhB,CAAf;AAAA,KAJF;;AAAA;AAAA;AAAA;AAAA;;AAOAH,MAAIC,EAAJ,CACE,gBAAWK,OADb,EAEE,6BAAc,CACZ;AACEC,YAAQ,OADV;AAEEC,aAAUL,GAAD,IAAS;AAChBA,UAAIM,iBAAJ;AAAA,sCAAsB,WAAOC,GAAP,EAAYC,YAAZ,EAA6B;AACjDD,cAAI,2BAAJ;AACA,gBAAME,YAAY,MAAMD,cAAxB;AACAD,cAAI,sBAAJ;AACA,gBAAMG,WAAW,MAAMF,cAAvB;AACAD,cAAK,SAAQE,SAAU,IAAGC,QAAS,EAAnC;AACD,SAND;;AAAA;AAAA;AAAA;AAAA;AAOD;AAVH,GADY,EAaZ;AACEL,aAAUL,GAAD,IAASA,IAAIW,KAAJ,CAAU,iCAAV;AADpB,GAbY,CAAd,CAFF;AAoBD,C","file":"bot.js","sourcesContent":["import { RTM_EVENTS } from 'koack/src/bot';\nimport type { Bot } from 'koack/src/bot';\nimport messageRouter from 'koack/src/message-router';\n\nconst loggerMiddleware = ({ event }) => console.log(event);\n\nexport default (bot: Bot) => {\n  bot.on(\n    RTM_EVENTS.CHANNEL_JOINED,\n    loggerMiddleware,\n    (ctx) => console.log(ctx),\n    async (ctx) => Promise.resolve(console.log(ctx)),\n  );\n\n  bot.on(\n    RTM_EVENTS.MESSAGE,\n    messageRouter([\n      {\n        regexp: /hello/,\n        handler: (ctx) => {\n          ctx.startConversation(async (say, waitResponse) => {\n            say('What is your first name ?');\n            const firstName = await waitResponse();\n            say('And your last name ?');\n            const lastName = await waitResponse();\n            say(`Hello ${firstName} ${lastName}`);\n          });\n        },\n      },\n      {\n        handler: (ctx) => ctx.reply('Sorry, I didn\\'t understood you'),\n      },\n    ]),\n  );\n};\n"]}