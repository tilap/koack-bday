{"version":3,"sources":["../src/pool.js"],"names":["process","env","SLACK_CLIENTID","Error","key","SLACK_CLIENTSECRET","SLACK_POOL_SIZE","SLACK_SCOPE","pool","size","Number","path","require","resolve","server","scopes","split","slackClient","clientID","clientSecret","storage","listen","port","PORT"],"mappings":";;AAAA;;AACA;;;;;;AAEA,IAAI,CAACA,QAAQC,GAAR,CAAYC,cAAjB,EAAiC;AAC/B,QAAM,IAAIC,KAAJ,CAAU,2BAAV,EAAuC,EAAEC,KAAK,gBAAP,EAAvC,CAAN;AACD;AACD,IAAI,CAACJ,QAAQC,GAAR,CAAYI,kBAAjB,EAAqC;AACnC,QAAM,IAAIF,KAAJ,CAAU,2BAAV,EAAuC,EAAEC,KAAK,oBAAP,EAAvC,CAAN;AACD;AACD,IAAI,CAACJ,QAAQC,GAAR,CAAYK,eAAjB,EAAkC;AAChC,QAAM,IAAIH,KAAJ,CAAU,2BAAV,EAAuC,EAAEC,KAAK,iBAAP,EAAvC,CAAN;AACD;AACD,IAAI,CAACJ,QAAQC,GAAR,CAAYM,WAAjB,EAA8B;AAC5B,QAAM,IAAIJ,KAAJ,CAAU,2BAAV,EAAuC,EAAEC,KAAK,aAAP,EAAvC,CAAN;AACD;;AAED,MAAMI,OAAO,gBAAS;AACpBC,QAAMC,OAAOV,QAAQC,GAAR,CAAYK,eAAnB,CADc;AAEpBK,QAAMC,QAAQC,OAAR,CAAgB,OAAhB;AAFc,CAAT,CAAb;;AAKA,MAAMC,SAAS,kBAAW;AACxBN,MADwB;AAExBO,UAAQf,QAAQC,GAAR,CAAYM,WAAZ,CAAwBS,KAAxB,CAA8B,GAA9B,CAFgB;AAGxBC,eAAa;AACXC,cAAUlB,QAAQC,GAAR,CAAYC,cADX;AAEXiB,kBAAcnB,QAAQC,GAAR,CAAYI;AAFf,GAHW;AAOxBe,WAAS;AAPe,CAAX,CAAf;;AAUAN,OAAOO,MAAP,CAAc,EAAEC,MAAMZ,OAAOV,QAAQC,GAAR,CAAYsB,IAAnB,KAA4B,IAApC,EAAd","file":"pool.js","sourcesContent":["import { Pool, Server } from 'koack';\nimport memoryStorage from 'koack/storages/memory';\n\nif (!process.env.SLACK_CLIENTID) {\n  throw new Error('Missing env configuration', { key: 'SLACK_CLIENTID' });\n}\nif (!process.env.SLACK_CLIENTSECRET) {\n  throw new Error('Missing env configuration', { key: 'SLACK_CLIENTSECRET' });\n}\nif (!process.env.SLACK_POOL_SIZE) {\n  throw new Error('Missing env configuration', { key: 'SLACK_POOL_SIZE' });\n}\nif (!process.env.SLACK_SCOPE) {\n  throw new Error('Missing env configuration', { key: 'SLACK_SCOPE' });\n}\n\nconst pool = new Pool({\n  size: Number(process.env.SLACK_POOL_SIZE),\n  path: require.resolve('./bot'),\n});\n\nconst server = new Server({\n  pool,\n  scopes: process.env.SLACK_SCOPE.split(','),\n  slackClient: {\n    clientID: process.env.SLACK_CLIENTID,\n    clientSecret: process.env.SLACK_CLIENTSECRET,\n  },\n  storage: memoryStorage(),\n});\n\nserver.listen({ port: Number(process.env.PORT) || 3000 });\n"]}